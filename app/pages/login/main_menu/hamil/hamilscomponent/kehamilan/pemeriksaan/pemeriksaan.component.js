"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var Pemeriksaan_1 = require("./Pemeriksaan");
var router_1 = require("@angular/router");
var pemeriksaan_service_1 = require("../pemeriksaan.service");
var Toast = require("nativescript-toast");
var nativescript_angular_1 = require("nativescript-angular");
var PemeriksaanComponent = (function () {
    function PemeriksaanComponent(actRoute, serv, rouex) {
        var _this = this;
        this.actRoute = actRoute;
        this.serv = serv;
        this.rouex = rouex;
        this.keadanumum = [{ key: 0, label: 'Baik' },
            { key: 1, label: 'Lemah' },
            { key: 2, label: 'Tampak Anemis' }];
        this.keadaankhusus = [{ key: 0, label: 'Tidak Ada' },
            { key: 1, label: 'Bengkak Muka/Tungkai' },
            { key: 2, label: 'Kembar Air' },
            { key: 3, label: 'Kejang-kejang' }];
        this.pone = [{ key: 0, label: '-' }, { key: 1, label: '+' }];
        this.proteinurine = ["Tidak Diperiksa", "Negatif", "+1", "+2", "Lebih dari +2 "];
        this.glukosa = ["Tidak diperiksa", "Reduksi +", "Reduksi -"];
        this.goldar = ["Belum diperiksa", "A", "B", "AB", "O"];
        this.yatak = [{ key: 0, label: 'Tidak' }, { key: 1, label: 'Ya' }];
        this.hima = [{ key: 0, label: 'mati' }, { key: 1, label: 'hidup' }];
        this.komplikasi = [
            { key: 0, label: 'HDK' },
            { key: 1, label: 'abortus' },
            { key: 2, label: 'perdarahan' },
            { key: 3, label: 'infeksi' },
            { key: 4, label: 'KPD' },
            { key: 5, label: 'lainnya' },
            { key: 6, label: 'tidak ada' }
        ];
        this.dirujuk = [
            { key: 0, label: 'Puskesmas' },
            { key: 1, label: 'Rumah sakit bersalin' },
            { key: 2, label: 'Rumah salit ibu anak' },
            { key: 3, label: 'Rumah sakit' },
            { key: 4, label: 'lainnya' },
            { key: 5, label: 'tidak dirujuk' }
        ];
        this.isedit = false;
        this.pemeriksaan = new Pemeriksaan_1.Pemeriksaan();
        this.actRoute.queryParams.subscribe(function (params) {
            _this.id_kehamilan = params.id_kehamilan;
            if (params.data) {
                console.log(params.data);
                _this.id_pemeriksaan = params.id_pemeriksaan;
                _this.pemeriksaan = JSON.parse(params.data);
                _this.isedit = true;
            }
        });
    }
    PemeriksaanComponent.prototype.save = function () {
        var _this = this;
        console.log("telo " + console.log(JSON.stringify(this.pemeriksaan)), null, "\t");
        if (this.isedit) {
            this.serv.update(this.id_kehamilan, this.pemeriksaan.id, this.pemeriksaan).subscribe(function (res) {
                Toast.makeText(res.message).show();
                _this.rouex.backToPreviousPage();
            }, function (err) { return Toast.makeText(err.json().message).show(); });
        }
        else {
            this.serv.store(this.id_kehamilan, this.pemeriksaan).subscribe(function (res) {
                Toast.makeText(res.message).show();
                _this.rouex.backToPreviousPage();
            }, function (err) { return Toast.makeText(err.json().message).show(); });
        }
    };
    PemeriksaanComponent.prototype.ngOnInit = function () { };
    PemeriksaanComponent = __decorate([
        core_1.Component({
            moduleId: module.id,
            selector: 'app-pemeriksaan',
            templateUrl: './pemeriksaan.component.html',
            styleUrls: ['./pemeriksaan.component.css'],
            providers: [pemeriksaan_service_1.PemeriksaanService]
        }),
        __metadata("design:paramtypes", [router_1.ActivatedRoute,
            pemeriksaan_service_1.PemeriksaanService,
            nativescript_angular_1.RouterExtensions])
    ], PemeriksaanComponent);
    return PemeriksaanComponent;
}());
exports.PemeriksaanComponent = PemeriksaanComponent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGVtZXJpa3NhYW4uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsicGVtZXJpa3NhYW4uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsc0NBQWtEO0FBQ2xELDZDQUEwQztBQUMxQywwQ0FBK0M7QUFDL0MsOERBQTBEO0FBQzFELDBDQUE0QztBQUM1Qyw2REFBc0Q7QUFTdEQ7SUE4Q0ksOEJBQ1ksUUFBdUIsRUFDdkIsSUFBdUIsRUFDdkIsS0FBc0I7UUFIbEMsaUJBa0JDO1FBakJXLGFBQVEsR0FBUixRQUFRLENBQWU7UUFDdkIsU0FBSSxHQUFKLElBQUksQ0FBbUI7UUFDdkIsVUFBSyxHQUFMLEtBQUssQ0FBaUI7UUExQ2xDLGVBQVUsR0FBQyxDQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFO1lBQ2xDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFO1lBQzFCLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsZUFBZSxFQUFFLENBQUUsQ0FBQztRQUV6QyxrQkFBYSxHQUFDLENBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxXQUFXLEVBQUU7WUFDMUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxzQkFBc0IsRUFBRTtZQUN6QyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLFlBQVksRUFBRTtZQUMvQixFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLGVBQWUsRUFBRSxDQUFFLENBQUM7UUFFekMsU0FBSSxHQUFHLENBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxDQUFFLENBQUM7UUFFMUQsaUJBQVksR0FBRyxD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QUFDLEVBQUU7WUFDbkIsUUFBUSxFQUFFLGlCQUFpQjtZQUMzQixXQUFXLEVBQUUsOEJBQThCO1lBQzNDLFNBQVMsRUFBRSxDQUFDLDZCQUE2QixDQUFDO1lBQzFDLFNBQVMsRUFBRSxDQUFDLHdDQUFrQixDQUFDO1NBQ2xDLENBQUM7eUNBZ0R1Qix1QkFBYztZQUNsQix3Q0FBa0I7WUFDakIsdUNBQWdCO09BakR6QixvQkFBb0IsQ0EyRmhDO0lBQUQsMkJBQUM7Q0FBQSxBQTNGRCxJQTJGQztBQTNGWSxvREFBb0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtQZW1lcmlrc2Fhbn0gZnJvbSBcIi4vUGVtZXJpa3NhYW5cIjtcbmltcG9ydCB7QWN0aXZhdGVkUm91dGV9IGZyb20gXCJAYW5ndWxhci9yb3V0ZXJcIjtcbmltcG9ydCB7UGVtZXJpa3NhYW5TZXJ2aWNlfSBmcm9tIFwiLi4vcGVtZXJpa3NhYW4uc2VydmljZVwiO1xuaW1wb3J0ICogYXMgVG9hc3QgZnJvbSBcIm5hdGl2ZXNjcmlwdC10b2FzdFwiO1xuaW1wb3J0IHtSb3V0ZXJFeHRlbnNpb25zfSBmcm9tIFwibmF0aXZlc2NyaXB0LWFuZ3VsYXJcIjtcblxuQENvbXBvbmVudCh7XG4gICAgbW9kdWxlSWQ6IG1vZHVsZS5pZCxcbiAgICBzZWxlY3RvcjogJ2FwcC1wZW1lcmlrc2FhbicsXG4gICAgdGVtcGxhdGVVcmw6ICcuL3BlbWVyaWtzYWFuLmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnLi9wZW1lcmlrc2Fhbi5jb21wb25lbnQuY3NzJ10sXG4gICAgcHJvdmlkZXJzOiBbUGVtZXJpa3NhYW5TZXJ2aWNlXVxufSlcbmV4cG9ydCBjbGFzcyBQZW1lcmlrc2FhbkNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG5cbiAgICBwZW1lcmlrc2FhbjpQZW1lcmlrc2FhbjtcbiAgICBpZF9rZWhhbWlsYW46bnVtYmVyO1xuICAgIGlkX3BlbWVyaWtzYWFuOm51bWJlcjtcbiAgICBpc2VkaXQ6Ym9vbGVhbjtcblxuICAgIGtlYWRhbnVtdW09WyB7IGtleTogMCwgbGFiZWw6ICdCYWlrJyB9LFxuICAgICAgICB7IGtleTogMSwgbGFiZWw6ICdMZW1haCcgfSxcbiAgICAgICAgeyBrZXk6IDIsIGxhYmVsOiAnVGFtcGFrIEFuZW1pcycgfSBdO1xuXG4gICAga2VhZGFhbmtodXN1cz1bIHsga2V5OiAwLCBsYWJlbDogJ1RpZGFrIEFkYScgfSxcbiAgICAgICAgeyBrZXk6IDEsIGxhYmVsOiAnQmVuZ2thayBNdWthL1R1bmdrYWknIH0sXG4gICAgICAgIHsga2V5OiAyLCBsYWJlbDogJ0tlbWJhciBBaXInIH0sXG4gICAgICAgIHsga2V5OiAzLCBsYWJlbDogJ0tlamFuZy1rZWphbmcnIH0gXTtcblxuICAgIHBvbmUgPSBbIHsga2V5OiAwLCBsYWJlbDogJy0nIH0sIHsga2V5OiAxLCBsYWJlbDogJysnIH0gXTtcblxuICAgIHByb3RlaW51cmluZSA9IFtcIlRpZGFrIERpcGVyaWtzYVwiLFwiTmVnYXRpZlwiLFwiKzFcIixcIisyXCIsXCJMZWJpaCBkYXJpICsyIFwiXTtcblxuICAgIGdsdWtvc2EgPSBbXCJUaWRhayBkaXBlcmlrc2FcIixcIlJlZHVrc2kgK1wiLFwiUmVkdWtzaSAtXCJdO1xuXG4gICAgZ29sZGFyID1bXCJCZWx1bSBkaXBlcmlrc2FcIixcIkFcIixcIkJcIixcIkFCXCIsXCJPXCJdO1xuXG4gICAgeWF0YWsgPSBbIHsga2V5OiAwLCBsYWJlbDogJ1RpZGFrJyB9LCB7IGtleTogMSwgbGFiZWw6ICdZYScgfSBdO1xuXG4gICAgaGltYSA9IFsgeyBrZXk6IDAsIGxhYmVsOiAnbWF0aScgfSwgeyBrZXk6IDEsIGxhYmVsOiAnaGlkdXAnIH0gXTtcblxuICAgIGtvbXBsaWthc2kgPSBbXG4gICAgICAgIHsga2V5OiAwLCBsYWJlbDogJ0hESycgfSxcbiAgICAgICAgeyBrZXk6IDEsIGxhYmVsOiAnYWJvcnR1cycgfSxcbiAgICAgICAgeyBrZXk6IDIsIGxhYmVsOiAncGVyZGFyYWhhbicgfSxcbiAgICAgICAgeyBrZXk6IDMsIGxhYmVsOiAnaW5mZWtzaScgfSxcbiAgICAgICAgeyBrZXk6IDQsIGxhYmVsOiAnS1BEJyB9LFxuICAgICAgICB7IGtleTogNSwgbGFiZWw6ICdsYWlubnlhJyB9LFxuICAgICAgICB7IGtleTogNiwgbGFiZWw6ICd0aWRhayBhZGEnIH0gXTtcblxuICAgIGRpcnVqdWsgPSBbXG4gICAgICAgIHsga2V5OiAwLCBsYWJlbDogJ1B1c2tlc21hcycgfSxcbiAgICAgICAgeyBrZXk6IDEsIGxhYmVsOiAnUnVtYWggc2FraXQgYmVyc2FsaW4nIH0sXG4gICAgICAgIHsga2V5OiAyLCBsYWJlbDogJ1J1bWFoIHNhbGl0IGlidSBhbmFrJyB9LFxuICAgICAgICB7IGtleTogMywgbGFiZWw6ICdSdW1haCBzYWtpdCcgfSxcbiAgICAgICAgeyBrZXk6IDQsIGxhYmVsOiAnbGFpbm55YScgfSxcbiAgICAgICAgeyBrZXk6IDUsIGxhYmVsOiAndGlkYWsgZGlydWp1aycgfVxuICAgIF07XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBhY3RSb3V0ZTpBY3RpdmF0ZWRSb3V0ZSxcbiAgICAgICAgcHJpdmF0ZSBzZXJ2OlBlbWVyaWtzYWFuU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSByb3VleDpSb3V0ZXJFeHRlbnNpb25zXG4gICAgKSB7XG4gICAgICAgIHRoaXMuaXNlZGl0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGVtZXJpa3NhYW4gPSBuZXcgUGVtZXJpa3NhYW4oKTtcbiAgICAgICAgdGhpcy5hY3RSb3V0ZS5xdWVyeVBhcmFtcy5zdWJzY3JpYmUoXG4gICAgICAgICAgICBwYXJhbXMgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaWRfa2VoYW1pbGFuID0gcGFyYW1zLmlkX2tlaGFtaWxhbjtcbiAgICAgICAgICAgICAgICBpZiAocGFyYW1zLmRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocGFyYW1zLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlkX3BlbWVyaWtzYWFuID0gcGFyYW1zLmlkX3BlbWVyaWtzYWFuO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBlbWVyaWtzYWFuID0gPFBlbWVyaWtzYWFuPiBKU09OLnBhcnNlKHBhcmFtcy5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc2VkaXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBzYXZlKCl7XG4gICAgICAgIGNvbnNvbGUubG9nKFwidGVsbyBcIitjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeSh0aGlzLnBlbWVyaWtzYWFuKSksbnVsbCwgXCJcXHRcIik7XG4gICAgICAgIGlmICh0aGlzLmlzZWRpdCl7XG4gICAgICAgICAgICB0aGlzLnNlcnYudXBkYXRlKHRoaXMuaWRfa2VoYW1pbGFuLHRoaXMucGVtZXJpa3NhYW4uaWQsdGhpcy5wZW1lcmlrc2Fhbikuc3Vic2NyaWJlKFxuICAgICAgICAgICAgICAgIHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgICAgIFRvYXN0Lm1ha2VUZXh0KHJlcy5tZXNzYWdlKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm91ZXguYmFja1RvUHJldmlvdXNQYWdlKClcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVyciA9PiBUb2FzdC5tYWtlVGV4dChlcnIuanNvbigpLm1lc3NhZ2UpLnNob3coKVxuXG4gICAgICAgICAgICApXG4gICAgICAgIH0gZWxzZXtcbiAgICAgICAgICAgIHRoaXMuc2Vydi5zdG9yZSh0aGlzLmlkX2tlaGFtaWxhbix0aGlzLnBlbWVyaWtzYWFuKS5zdWJzY3JpYmUoXG4gICAgICAgICAgICAgICAgcmVzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgVG9hc3QubWFrZVRleHQocmVzLm1lc3NhZ2UpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3VleC5iYWNrVG9QcmV2aW91c1BhZ2UoKVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXJyID0+IFRvYXN0Lm1ha2VUZXh0KGVyci5qc29uKCkubWVzc2FnZSkuc2hvdygpXG5cbiAgICAgICAgICAgIClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG5nT25Jbml0KCkgeyB9XG5cbn1cbiJdfQ==